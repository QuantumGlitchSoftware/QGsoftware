<!DOCTYPE html>
<html>
	<!--XOR created by QuantumGlitchSoftware-->
	<head>
		<link href='https://fonts.googleapis.com/css?family=Aldrich' rel='stylesheet'>
        <style>
			
            tr, td {
				border: 1px solid white;
                height: 60px;
                width: 60px;
            }
            
            * {
                color: white;
                background-color: black;
                font-family: Aldrich;
                
            }
            
            #completion {
                width: 655px;
                height: 60px;
                font-size: 40px;
            }
            
            #level {
                width: 90px;
                text-align: center;
            }
            
            #grid, #sidebar, #topbar, #levelbar {
                display: inline-block;
            }
        
            #sidebar2 {
                height: 390px;
                width: 90px;
            }
            
            #side {
                color: blue;
                font-size: 30px;
                text-align: center;
            }
            #enemySideBar {
                color: red;
                font-size: 30px;
                text-align: center;
            }
        </style>
	</head>
	<body>
		<h1>XOR</h1>
		
        <table id="levelbar">
            <tr>
                <td id="level">LEVEL: 0</td>
            </tr>
        </table>
        <table id="topbar">
            <tr>
                <td id="completion"></td>
            </tr>
        </table>
        <br>
        
        <!--Sidebar-->
        <table id="sidebar">
            <tr>
                <td id="sidebar2">
                    <p id="side">0,0</p>
                    <p id="enemySideBar">9,5</p>
                </td>
            </tr>
        </table>
        
        <!--Grid-->
        <table id="grid">
			
            <!--row 5-->
            <tr>
                <td id="p0-5"></td>
				<td id="p1-5"></td>
                <td id="p2-5"></td>
                <td id="p3-5"></td>
                <td id="p4-5"></td>
                <td id="p5-5"></td>
                <td id="p6-5"></td>
                <td id="p7-5"></td>
                <td id="p8-5"></td>
                <td id="p9-5"></td>
            </tr>
			
            <!--row 4-->
            <tr>
				<td id="p0-4"></td>
				<td id="p1-4"></td>
                <td id="p2-4"></td>
                <td id="p3-4"></td>
                <td id="p4-4"></td>
                <td id="p5-4"></td>
                <td id="p6-4"></td>
                <td id="p7-4"></td>
                <td id="p8-4"></td>
                <td id="p9-4"></td>
            </tr>
            
            <!--row 3-->
            <tr>
                <td id="p0-3"></td>
                <td id="p1-3"></td>
                <td id="p2-3"></td>
                <td id="p3-3"></td>
                <td id="p4-3"></td>
                <td id="p5-3"></td>
                <td id="p6-3"></td>
                <td id="p7-3"></td>
                <td id="p8-3"></td>
                <td id="p9-3"></td>
            </tr>
            
            <!--row 2-->
            <tr>
                <td id="p0-2"></td>
                <td id="p1-2"></td>
                <td id="p2-2"></td>
                <td id="p3-2"></td>
                <td id="p4-2"></td>
                <td id="p5-2"></td>
                <td id="p6-2"></td>
                <td id="p7-2"></td>
                <td id="p8-2"></td>
                <td id="p9-2"></td>
            </tr>
            
            <!--row 1-->
            <tr>
                <td id="p0-1"></td>
                <td id="p1-1"></td>
                <td id="p2-1"></td>
                <td id="p3-1"></td>
                <td id="p4-1"></td>
                <td id="p5-1"></td>
                <td id="p6-1"></td>
                <td id="p7-1"></td>
                <td id="p8-1"></td>
                <td id="p9-1"></td>
            </tr>
            
            <!--row 0-->
            <tr>
                <td id="p0-0"></td>
                <td id="p1-0"></td>
                <td id="p2-0"></td>
                <td id="p3-0"></td>
                <td id="p4-0"></td>
                <td id="p5-0"></td>
                <td id="p6-0"></td>
                <td id="p7-0"></td>
                <td id="p8-0"></td>
                <td id="p9-0"></td>
            </tr>
        </table>
		
        <script>
//XOR developed by SUPERGLITCHED posted to QUANTUMGLITCHSOFTWARE.GITHUB.IO

//BLUE SQUARE MOVEMENT
        //set the blue starting coordinates
        //blue position
        var position = "p0-0";
		//blue position on X axis
        var positionXAxis = 0;
		//blue position on Y axis
        var positionYAxis = 0;
        
        //player indicator position
        //top
        var positionIndicatorTop;
        //bottom
        var positionIndicatorBottom;
        //left
        var positionIndicatorLeft;
        //right
        var posiionIndicatorRight;
        
        
        //bind keys
        window.addEventListener("keyup", binds, false);
        function binds(e) {
            
            //test for which key pressed and set coordinates
            if (e.keyCode == "40") {
                //go down
                positionYAxis = positionYAxis - 1;
            } else if (e.keyCode == "39") {
                //go right
                positionXAxis = positionXAxis + 1;
            } else if (e.keyCode == "38") {
                //go up
                positionYAxis = positionYAxis + 1;
            } else if (e.keyCode == "37") {
                //go left
                positionXAxis = positionXAxis - 1;
            }
            
            //collision detection top
            if (positionYAxis > 5) {
                positionYAxis = 5;
            }
            
            //collision detection bottom
            if (positionYAxis < 0) {
                positionYAxis = 0;
            }
            
            //collision detection left
            if (positionXAxis < 0) {
                positionXAxis = 0;
            }
            
            //collision detection right
            if (positionXAxis > 9) {
                positionXAxis = 9;
            }
            
            //puts X and Y coordinates together blue square
            position = "p" + positionXAxis + "-" + positionYAxis;
            
            //indicator coordinates
            //top
            positionIndicatorTop = "p" + positionXAxis + "-" + 5;
            //bottom
            positionIndicatorBottom = "p" + positionXAxis + "-" + 0;
            //left
            positionIndicatorLeft = "p" + 0 + "-" + positionYAxis;
            //right
            positionIndicatorRight = "p" + 9 + "-" + positionYAxis;
            
            //sets sidebar coordinates
            var sideBarPosition = positionXAxis + "," + positionYAxis;
            document.getElementById("side").innerHTML = sideBarPosition;
            
            //color function
            color();
        }
		
        
//ENEMY 1 MOVEMENT
        //enemy coordinates default
        //coords
        var enemyPosition = "p9-5";
        //X axis
        var enemyPositionXAxis = 9;
        //Y axis
        var enemyPositionYAxis = 5;
        
        //set interval for enemy movement function every half second
        var enemyInterval = setInterval(enemyMove, 500);
        function enemyMove() {
            
            //genarates random number from 0-1
            var chance = Math.floor(Math.random() * 2);
            
            //move towards player on X axis if chance = 0
            if (chance === 0) {
                //if enemy is to the left of the player, move right
                if (enemyPositionXAxis < positionXAxis) {
                    enemyPositionXAxis = enemyPositionXAxis + 1;
                }
                //if enemy is to the right of the player, move left
                else if (enemyPositionXAxis > positionXAxis) {
                    enemyPositionXAxis = enemyPositionXAxis - 1;
                } else {
                    //if enemy is on the same axis, call stalemate function
                    stalemate();
                }
            }
            //move towards player on Y axis if chance = 1
            else if (chance === 1) {
                //if enemy is below the player, move up
                if (enemyPositionYAxis < positionYAxis) {
                    enemyPositionYAxis = enemyPositionYAxis + 1;
                }
                //if enemy is above the player, move down
                else if (enemyPositionYAxis > positionYAxis) {
                    enemyPositionYAxis = enemyPositionYAxis - 1;
                } else {
                    //if enemy is on the same axis, call stalemate function
                    stalemate();
                }
            }
            
            
            //stalemate function moves enemy towards the player on the other axis if they are already on the same chosen axis. essentially, this code is identical to the code above, it is just reversed, so if chance = 0, it would be like making chance = 1. this way when the square is on the same axis, it doesn't freeze or get confused.
            function stalemate() {
                //move towards player on Y axis if chance = 1
                if (chance === 0) {
                    //if enemy is below the player, move up
                    if (enemyPositionYAxis < positionYAxis) {
                        enemyPositionYAxis = enemyPositionYAxis + 1;
                    }
                    //if enemy is above the player, move down
                    else if (enemyPositionYAxis > positionYAxis) {
                        enemyPositionYAxis = enemyPositionYAxis - 1;
                    }
                }
                //move towards player on X axis if chance = 0
                else {
                    //if enemy is to the left of the player, move right
                    if (enemyPositionXAxis < positionXAxis) {
                        enemyPositionXAxis = enemyPositionXAxis + 1;
                    }
                    //if enemy is to the right of the player, move left
                    else if (enemyPositionXAxis > positionXAxis) {
                        enemyPositionXAxis = enemyPositionXAxis - 1;
                    }
                }
            }
            
            //add enemy coordinates
            enemyPosition = "p" + enemyPositionXAxis + "-" + enemyPositionYAxis;
            
            //sidebar enemy coordinates
            //put comma inbetween the enemy coordinates
            var enemySideBarPosition = enemyPositionXAxis + "," + enemyPositionYAxis;
            //put the coordinates onto the sidebar
            document.getElementById("enemySideBar").innerHTML = enemySideBarPosition;
            
            //color function
            color();
        }
        
        
//LEVEL COUNTER / COMPLETION BAR
        //ammount of "|"s in the completion bar
        var completionPercent = "";
        //the text displayed in the level counter
        var levelDisplay = "Level: 0";
        //the level number itself
        var level = 0;
        
        //timer interval set to run function every 1 second
        var timer = setInterval(timer, 1000);
        function timer() {
            //add one | to the bar
            completionPercent = completionPercent + "|";
            //update the html tag
            document.getElementById("completion").innerHTML = completionPercent;
            //test for timer full
            if (completionPercent === "||||||||||||||||||||||||||||||||||||||||||||||||||||||||||") {
                
                //reset bar
                completionPercent = "";
                
                //add +1 to level
                level = level + 1;
                //combine "LEVEL:" and level number
                levelDisplay = "LEVEL: " + level;
                //add to the display
                document.getElementById("level").innerHTML = levelDisplay;
            }
        }
//ENEMY COLLISIONS
        //TODO: make this actually work that might be nice
        while (enemyPosition === position) {
                alert("GAME OVER");
        }
        
//Visual Movment
        //variable used in the for loop
        var movementLoop;
        //variable element td tags
        var td = document.getElementsByTagName("td");
        //call color function
        color();
        //function resets background and then colors what needs to be colored
        function color() {
            //set movementloop to every number in td array
            for (movementLoop = 0; movementLoop < 63; movementLoop++) {
                //set td tag to background color black
                td[movementLoop].style.backgroundColor = "black";
                td[movementLoop].style.border = "solid 1px white";
            }
            //squares
            //color player square
            document.getElementById(position).style.backgroundColor = "blue";
            //color enemy square
            document.getElementById(enemyPosition).style.backgroundColor = "red";
            
            //indicators player
            //top
            document.getElementById(positionIndicatorTop).style.borderTop = "solid thick blue";
            //bottom
            document.getElementById(positionIndicatorBottom).style.borderBottom = "solid thick blue";
            //left
            document.getElementById(positionIndicatorLeft).style.borderLeft = "solid thick blue";
            //right
            document.getElementById(positionIndicatorRight).style.borderRight = "solid thick blue";
        }
        </script>
    </body>
</html>